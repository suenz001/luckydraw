<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ©Ÿç‡æŠ½çæ¨¡æ“¬å™¨</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50; /*ä»¥æ­¤æ·±è‰²èƒŒæ™¯è¥¯æ‰˜é¡è‰²*/
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            flex-direction: column;
        }
        .container {
            background: #34495e;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        h1 { margin-bottom: 10px; font-size: 24px;}
        
        /* æ©Ÿç‡è¡¨æ¨£å¼ */
        .odds-table {
            width: 100%;
            margin: 15px 0;
            font-size: 14px;
            color: #bdc3c7;
            border-collapse: collapse;
        }
        .odds-table td { padding: 4px; border-bottom: 1px solid #46607a; }
        
        button {
            background-color: #f1c40f;
            color: #2c3e50;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.3s;
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 0 #d4ac0d;
        }
        button:active { transform: translateY(4px); box-shadow: none; }
        button:disabled { background-color: #95a5a6; box-shadow: none; cursor: not-allowed; }

        /* é¡¯ç¤ºçµæœçš„å¡ç‰‡ */
        #result-card {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            font-size: 28px;
            font-weight: bold;
            display: none; /* é è¨­éš±è— */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }

        /* å„ç¨®ç¨€æœ‰åº¦çš„æ¨£å¼è¨­å®š */
        .rank-common { 
            background: #ecf0f1; color: #7f8c8d; border: 2px solid #bdc3c7; 
            text-shadow: none;
        }
        .rank-uncommon { 
            background: #2ecc71; color: white; border: 2px solid #27ae60;
            box-shadow: 0 0 10px #2ecc71;
        }
        .rank-rare { 
            background: #3498db; color: white; border: 2px solid #2980b9;
            box-shadow: 0 0 15px #3498db;
        }
        .rank-epic { 
            background: #9b59b6; color: white; border: 2px solid #8e44ad;
            box-shadow: 0 0 20px #9b59b6;
        }
        .rank-legendary { 
            background: #e67e22; color: white; border: 2px solid #d35400;
            box-shadow: 0 0 25px #e67e22, 0 0 50px #e67e22;
        }
        .rank-mythic { 
            background: #e74c3c; color: white; border: 2px solid #c0392b;
            box-shadow: 0 0 30px #e74c3c, 0 0 60px #e74c3c, inset 0 0 20px white;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .history {
            margin-top: 20px;
            font-size: 12px;
            color: #95a5a6;
            max-height: 100px;
            overflow-y: auto;
            text-align: left;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ”® é‹æ°£æ¸¬è©¦</h1>
    
    <table class="odds-table">
        <tr><td style="color:#ecf0f1">æ™®é€š (60%)</td><td style="color:#2ecc71">ç½•è¦‹ (20%)</td></tr>
        <tr><td style="color:#3498db">ç¨€æœ‰ (10%)</td><td style="color:#9b59b6">å²è©© (6%)</td></tr>
        <tr><td style="color:#e67e22">å‚³å¥‡ (3%)</td><td style="color:#e74c3c; font-weight:bold;">ç¥è©± (1%)</td></tr>
    </table>

    <div id="result-card">?</div>
    
    <button id="drawBtn" onclick="draw()">ç«‹å³æŠ½é¸</button>

    <div class="history" id="historyLog">
        æŠ½çç´€éŒ„å°‡é¡¯ç¤ºæ–¼æ­¤...
    </div>
</div>

<script>
    // å®šç¾©çé …èˆ‡æ©Ÿç‡ (æ¬Šé‡ç´¯ç©æ³•)
    // é †åºå¾ˆé‡è¦ï¼Œæ©Ÿç‡å°çš„é€šå¸¸æ”¾åœ¨æœ€å¾Œåˆ¤æ–·ï¼Œæˆ–è€…ä½¿ç”¨ç´¯ç©æ©Ÿç‡å€é–“
    const tiers = [
        { name: 'æ™®é€š (ç™½è‰²)', class: 'rank-common', probability: 60 },
        { name: 'ç½•è¦‹ (ç¶ è‰²)', class: 'rank-uncommon', probability: 20 },
        { name: 'ç¨€æœ‰ (è—è‰²)', class: 'rank-rare', probability: 10 },
        { name: 'å²è©© (ç´«è‰²)', class: 'rank-epic', probability: 6 },
        { name: 'å‚³å¥‡ (æ©˜è‰²)', class: 'rank-legendary', probability: 3 },
        { name: 'ç¥è©± (ç´…è‰²)', class: 'rank-mythic', probability: 1 }
    ];

    function draw() {
        const btn = document.getElementById('drawBtn');
        const card = document.getElementById('result-card');
        const history = document.getElementById('historyLog');

        // å‹•ç•«æ•ˆæœï¼šæŒ‰éˆ•æš«æ™‚å¤±æ•ˆ
        btn.disabled = true;
        card.style.display = 'block';
        card.className = ''; // æ¸…é™¤èˆŠæ¨£å¼
        card.style.backgroundColor = '#34495e'; // å‹•ç•«æ™‚çš„èƒŒæ™¯
        card.innerText = 'ğŸ²...';
        
        let flashCount = 0;
        const flashInterval = setInterval(() => {
            // éš¨æ©Ÿé–ƒçˆé¡è‰²è£½é€ ç·Šå¼µæ„Ÿ
            const randomTier = tiers[Math.floor(Math.random() * tiers.length)];
            card.style.color = window.getComputedStyle(document.querySelector('.' + randomTier.class)).backgroundColor;
            flashCount++;
            
            if (flashCount > 10) { // é–ƒçˆ 10 æ¬¡å¾Œåœæ­¢
                clearInterval(flashInterval);
                showResult(card, btn, history);
            }
        }, 80);
    }

    function showResult(card, btn, history) {
        // æ ¸å¿ƒæ©Ÿç‡é‚è¼¯ï¼šç”¢ç”Ÿ 0 ~ 100 ä¹‹é–“çš„éš¨æ©Ÿæ•¸
        const rand = Math.random() * 100;
        let cumulative = 0;
        let result = null;

        // ä¾åºæª¢æŸ¥è½åœ¨å“ªå€‹å€é–“
        for (let tier of tiers) {
            cumulative += tier.probability;
            if (rand < cumulative) {
                result = tier;
                break;
            }
        }

        // é¡¯ç¤ºçµæœ
        card.className = result.class; // å¥—ç”¨å°æ‡‰é¡è‰²çš„ CSS
        card.style.color = ''; // ç§»é™¤å‰›å‰›é–ƒçˆå¼·åˆ¶è¨­å®šçš„é¡è‰²
        card.style.backgroundColor = ''; // æ¢å¾© CSS è¨­å®šçš„èƒŒæ™¯
        card.innerText = result.name;

        // å¯«å…¥ç´€éŒ„
        const p = document.createElement('div');
        p.innerText = `æŠ½åˆ°äº†ï¼š${result.name}`;
        // å°‡æ–°ç´€éŒ„æ’åœ¨æœ€ä¸Šé¢
        history.insertBefore(p, history.firstChild);

        btn.disabled = false;
    }
</script>

</body>
</html>